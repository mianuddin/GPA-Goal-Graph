Number.prototype.round=function(a){return+(Math.round(this+"e+"+a)+"e-"+a)};var mathModule=function(){function a(a,s,e,t){this.maxCredits=220,this.currentGPA=a,this.goalGPA=s,this.credits=e,this.target_credits=t,this.getCreditsRemaining=function(){return this.maxCredits-this.target_credits},this.getTargetGPA=function(){var a=(this.goalGPA*this.target_credits-this.currentGPA*this.credits)/(this.target_credits-this.credits);return a.round(2)},this.isAchieveable=function(){return this.getTargetGPA()<=5}}function s(a){var s=0,e=a;return/^([a-fA-f][+-]?|[0-4][.]?[0-9]?)/.test(e)&&(s="A"==e||"a"==e?4:"A-"==e||"a-"==e?3.6666666:"B+"==e||"b+"==e?3.3333333:"B"==e||"b"==e?3:"B-"==e||"b-"==e?2.6666666:"C+"==e||"c+"==e?2.3333333:"C"==e||"c"==e?2:"C-"==e||"c-"==e?1.6666666:"D+"==e||"d+"==e?1.3333333:"D"==e||"d"==e?1:"D-"==e||"d-"==e?.6666666:"F"==e||"f"==e?0:parseFloat(e)),s}function e(a){for(var s=0,e=0;e<a.length;e++)s+=a[e].units;return s}function t(a){for(var s=0,e=0;e<a.length;e++)s+=a[e].grade_points;return s}function i(a){return t(a)/e(a)}function r(s,t){console.log("== checkForErrors() ==");var r=[];(s.gpa>5||s.gpa<0)&&r.push("GPA must be greater than 0 and less than 5."),(s.goal>5||s.goal<0)&&r.push("Goal GPA must be greater than 0 and less than 5."),1===s.classes.length&&s.target_credits<s.credits?r.push("Target credits is less than current credits."):s.classes.length>1&&s.target_credits<=e(s.classes)&&r.push("Your credit target is less than your current credit count with your classes."),console.log(s.classes),console.log("Length: "+s.classes.length);for(var l;l<s.classes.length;l++){var n=s.classes[l];/^([a-fA-f][+-]?|[0-4][.]?[0-9]?)/.test(n.grade)||r.push("A grade is invalid; must be a to f or numerical. Ex: B+, 3")}if(r.length)displayModule.showErrors(r,t);else{var o=s.gpa,c=s.credits;s.classes.length||(o=i(s.classes),c=e(s.classes));var d=new a(o,s.goal,c,s.target_credits);displayModule.display(d,t)}}var l={};return l.passInput=function(a,e){var t=parseFloat(a[2].value),i=parseFloat(a[3].value),l=parseFloat(a[0].value),n=parseFloat(a[1].value),o=[];if(o.push({units:l,grade:t,grade_points:l*t}),void 0!==a[4]&&"current_semester_checkbox"===a[4].name&&"on"===a[4].value)for(var c=5;c<a.length;c+=2)if(null!==a[c].value||0!==parseFloat(a[c].value)){var d={units:parseFloat(a[c].value),gradeInput:a[c+1].value,grade:s(a[c+1].value),grade_points:parseFloat(a[c].value)*s(a[c+1].value)};o.push(d)}r({gpa:t,goal:i,credits:l,target_credits:n,classes:o},e)},l}(),displayModule=function(){function a(a,s){$(a).css("opacity","0");var e=0;1==s&&(e=400),$(a).velocity({translateX:"-100px"},{duration:0}),$(a).each(function(){$(this).velocity({opacity:"1",translateX:"0"},{duration:800,delay:e,easing:[60,10]}),e+=120})}var s={};return s.display=function(s,e){1==e&&($("#formContainer").velocity({width:"70%",position:"absolute",marginLeft:"auto",marginRight:"auto",left:"0",right:"0"},{duration:0}),$("#formContainer").velocity({width:"25%",position:"absolute",marginLeft:"0",marginRight:"0",right:"100%",height:"100vh"},{duration:800,delay:0,easing:[60,10]}),$("#formContainer").removeClass("container"),$("#formContainer").addClass("sidebar"),$("#formContainer").addClass("col"),$("#formContainer").addClass("s3"),$("form>.row>.input-field").removeClass("m6"),$("#classlist li").removeClass("m6"),$(".card .input-field").removeClass("s6"),$(".card .input-field").addClass("s12")),s.isAchieveable()?($("#resultBox>span").html("<div class='col s6'> <h2>GPA to achieve (to avg. <span id='gpa_goal'></span>): <span id='gpa_achieve'></span></h2> </div> <div class='col s6'> <h2>Required Credits Left: <span id='credits_remaining'></span></h2> </div>"),$("#result").html("GPA to achieve (to avg. "+s.goalGPA+'): <strong id="target">'+s.getTargetGPA()+"</strong></br> Required Credits Left: <strong>"+s.getCreditsRemaining()+"</strong>"),$("#gpa_goal").html(s.goalGPA),$("#gpa_achieve").html(s.getTargetGPA()),$("#credits_remaining").html(s.getCreditsRemaining())):$("#resultBox>span").html("<h2>This goal is unachieveable.</h2>"),s.getTargetGPA()>4&&s.getTargetGPA()<=5?($("#graphKey>div:first-child").removeClass("s7"),$("#graphKey>div:first-child").addClass("s3"),$("#graphKey>div:first-child").css("padding","0 20px 0 0"),$("#conditional").css("display","block"),$("#ap").css("display","block"),$("#unach").css("display","none")):s.getTargetGPA()>5?($("#graphKey>div:first-child").removeClass("s7"),$("#graphKey>div:first-child").addClass("s3"),$("#graphKey>div:first-child").css("padding","0 20px 0 0"),$("#conditional").css("display","block"),$("#unach").css("display","block"),$("#ap").css("display","none")):($("#graphKey>div:first-child").addClass("s7"),$("#graphKey>div:first-child").removeClass("s3"),$("#graphKey>div:first-child").css("padding","0"),$("#conditional").css("display","none"),$("#unach").css("display","none"),$("#ap").css("display","none")),graphModule.fill(s),$(".ct-chart").css("height","70vh"),$(".hide").removeClass("hide"),a("body>.row>div",e)},s.showErrors=function(s,e){1==e&&($("#formContainer").velocity({width:"70%",position:"absolute",marginLeft:"auto",marginRight:"auto",left:"0",right:"0"},{duration:0}),$("#formContainer").velocity({width:"25%",position:"absolute",marginLeft:"0",marginRight:"0",right:"100%",height:"100vh"},{duration:800,delay:0,easing:[60,10]}),$("#formContainer").removeClass("container"),$("#formContainer").addClass("sidebar"),$("#formContainer").addClass("col"),$("#formContainer").addClass("s3"),$("form>.row>.input-field").removeClass("m6"),$("#classlist li").removeClass("m6"),$(".card .input-field").removeClass("s6"),$(".card .input-field").addClass("s12"));for(var t="<h2>Check your input!</h2><ul>",i=0;i<s.length;i++)t+="<li>"+s[i]+"</li>";t+="</ul>",$("#resultBox>span").html(t),$("#graphKey>div:first-child").addClass("s7"),$("#graphKey>div:first-child").removeClass("s3"),$("#graphKey>div:first-child").css("padding","0"),$("#conditional").css("display","none"),$("#unach").css("display","none"),$("#ap").css("display","none"),$(".ct-chart").css("height","70vh"),$("#graph").addClass("hide"),$("#graphKey").addClass("hide"),$("#gradRequirements").addClass("hide"),$("#infoCard").removeClass("hide"),a("body>.row>div",e)},s}(),graphModule=function(){function a(a,s){var e=[],t=s/2;return a.credits-t<0?e.push(0):e.push(a.credits-20),e.push(a.target_credits+20),console.log("== generated x bounds =="),console.log(e),e}function s(a){for(var s=[],e=a[0];e<=a[1];e+=n)s.push(e);return console.log("== generated x labels =="),console.log(s),s}function e(a,s){for(var e=(s[1]-s[0])/n,t=(a.credits-s[0])/n,i=e+t,r=Array(i).fill(null),l=Array(i).fill(null),o=Array(i+5).fill(4),c=Array(i+5).fill(5),d=0,h=t;h<=t+(a.target_credits-a.credits)/n;h++){var u=(a.getTargetGPA()-a.currentGPA)/(a.target_credits-a.credits)*d+a.currentGPA;console.log(a.getTargetGPA()+" "+a.currentGPA+" "+d),d+=5,r[h]=u,t+(a.target_credits-a.credits)/n==h?l[h]=a.goalGPA:l[h]=null}return{data:r,average:l,ap:o,unachieveable:c}}function t(a,s){return a>s?[a,s]:[s,a]}function i(a){var s=t(a.currentGPA,a.getTargetGPA())[0],e=t(a.currentGPA,a.getTargetGPA())[1],i=.1,r=[];s-e!==0&&(i=(s-e)/8);for(var l=2*i,n=e-l;s+l>=n;n+=i)r.push(n.round(3));return{array:r,increment:i,buffer:l,largerGPA:s,smallerGPA:e}}function r(a){return{unachieveable:a.array[a.array.length-1]>5,ap:a.array[a.array.length-1]>4}}var l={},n=5,o=12;return l.fill=function(t){var l=a(t,5*o),n=(l[0],l[1],i(t)),c={labels:s(l),series:[{name:"unachieveableLine",data:e(t,l).unachieveable},{name:"apLine",data:e(t,l).ap},{name:"currentGPA",data:e(t,l).data},{name:"averageGPA",data:e(t,l).average}]},d=[["screen and (max-width: 768px)",{axisX:{labelInterpolationFnc:function(a,s){return s%3===0?a:null}}}]];new Chartist.Line(".ct-chart",c,{lineSmooth:!1,axisY:{type:Chartist.FixedScaleAxis,ticks:n.array,high:n.largerGPA+n.buffer,low:n.smallerGPA-n.buffer},axisX:{position:"start"},series:{apLine:{showArea:r(n).ap,areaBase:5,showLine:r(n).ap,showPoint:!1},unachieveableLine:{showArea:r(n).unachieveable,areaBase:n.array[n.array.length-1],showLine:r(n).unachieveable,showPoint:!1}}},d)},l}(),formModule=function(){function a(){var a=$("#class_card_template").html(),s=Mustache.to_html(a,{number:$("#classlist>li").length+1});$("#classlist").append(s),i&&($("#classlist li").removeClass("m6"),$(".card .input-field").removeClass("s6"),$(".card .input-field").addClass("s12"))}function s(){var a=1;$("#classlist > li").each(function(){$(".card-title",this).text("Class "+a);var s=1;$("input",this).each(function(){1==s?($(this).prop("id","class"+a+"_units"),$(this).prop("name","class"+a+"_units")):($(this).prop("id","class"+a+"_gpa"),$(this).prop("name","class"+a+"_gpa")),s++}),s=1,$("label",this).each(function(){1==s?$(this).prop("for","class"+a+"_units"):$(this).prop("for","class"+a+"_gpa"),s++}),a++})}function e(){console.log("== bindUIActions() =="),$(document).on("click","form button",function(){i++,$("input").removeClass("invalid error"),mathModule.passInput($("form").serializeArray(),i)}),$(document).on("click","a.add",function(){a(),$("#class"+$("#classlist>li").length+"_units").val($("#class"+$(this).closest("li").index()+"_units").val()),""!==$("#class"+$("#classlist>li").length+"_units").val()&&$("#class"+$("#classlist>li").length+"_units").next().addClass("active"),$("#class"+$("#classlist>li").length+"_gpa").val($("#class"+$(this).closest("li").index()+"_gpa").val()),""!==$("#class"+$("#classlist>li").length+"_gpa").val()&&$("#class"+$("#classlist>li").length+"_gpa").next().addClass("active"),$("#classlist li").last().velocity({translateX:"-100px"},{duration:0}),$("#classlist li").last().velocity({opacity:"1",translateX:"0"},{duration:800,delay:0,easing:[60,10]})}),$(document).on("click","a.remove",function(){$(this).closest("li").remove(),s(),Materialize.showStaggeredList("#classlist")}),$("#current_semester_checkbox").change(function(){this.checked?($("#classes").removeClass("hidden"),0===$("#classlist > li").length&&a(),Materialize.showStaggeredList("#classlist")):$("#classlist > li").remove()})}var t={},i=0;return t.init=function(){console.log("== formModule initated =="),e()},t}();!function(){console.log("== script.js loaded =="),console.log("== initiating formModule =="),formModule.init()}();