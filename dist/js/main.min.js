Number.prototype.round=function(a){return+(Math.round(this+"e+"+a)+"e-"+a)};var mathModule=function(){function a(a,t,e,s){this.maxCredits=220,this.currentGPA=a,this.goalGPA=t,this.credits=e,this.target_credits=s,this.getCreditsRemaining=function(){return this.maxCredits-this.credits},this.getTargetGPA=function(){var a=(this.goalGPA*this.target_credits-this.currentGPA*this.credits)/(this.target_credits-this.credits);return a.round(2)},this.isAchieveable=function(){return this.getTargetGPA()<=5}}function t(a){var t=0,e=a;return t="A"==e||"a"==e?4:"A-"==e||"a-"==e?3.6666666:"B+"==e||"b+"==e?3.3333333:"B"==e||"b"==e?3:"B-"==e||"b-"==e?2.6666666:"C+"==e||"c+"==e?2.3333333:"C"==e||"c"==e?2:"C-"==e||"c-"==e?1.6666666:"D+"==e||"d+"==e?1.3333333:"D"==e||"d"==e?1:"D-"==e||"d-"==e?.6666666:"F"==e||"f"==e?0:parseFloat(e)}function e(a){for(var t=0,e=0;e<a.length;e++)t+=a[e].units;return t}function s(a){for(var t=0,e=0;e<a.length;e++)t+=a[e].grade_points;return t}function i(a){return s(a)/e(a)}function r(a,t){$(a).css("opacity","0");var e=0;1==t&&(e=400),$(a).velocity({translateX:"-100px"},{duration:0}),$(a).each(function(){$(this).velocity({opacity:"1",translateX:"0"},{duration:800,delay:e,easing:[60,10]}),e+=120})}function n(a,t){1==t&&($("#formContainer").velocity({width:"70%",position:"absolute",marginLeft:"auto",marginRight:"auto",left:"0",right:"0"},{duration:0}),$("#formContainer").velocity({width:"25%",position:"absolute",marginLeft:"0",marginRight:"0",right:"100%",height:"100vh"},{duration:800,delay:0,easing:[60,10]}),$("#formContainer").removeClass("container"),$("#formContainer").addClass("sidebar"),$("#formContainer").addClass("col"),$("#formContainer").addClass("s3"),$("form>.row>.input-field").removeClass("m6"),$("#classlist li").removeClass("m6"),$(".card .input-field").removeClass("s6"),$(".card .input-field").addClass("s12")),a.isAchieveable()?($("#resultBox>span").html("<div class='col s6'> <h2>GPA to achieve (to avg. <span id='gpa_goal'></span>): <span id='gpa_achieve'></span></h2> </div> <div class='col s6'> <h2>Required Credits Left: <span id='credits_remaining'></span></h2> </div>"),$("#result").html("GPA to achieve (to avg. "+a.goalGPA+'): <strong id="target">'+a.getTargetGPA()+"</strong></br> Required Credits Left: <strong>"+a.getCreditsRemaining()+"</strong>"),$("#gpa_goal").html(a.goalGPA),$("#gpa_achieve").html(a.getTargetGPA()),$("#credits_remaining").html(a.getCreditsRemaining())):$("#resultBox>span").html("<h2>This goal is unachieveable.</h2>"),a.getTargetGPA()>4&&a.getTargetGPA()<=5?($("#graphKey>div:first-child").removeClass("s7"),$("#graphKey>div:first-child").addClass("s3"),$("#graphKey>div:first-child").css("padding","0 20px 0 0"),$("#conditional").css("display","block"),$("#ap").css("display","block"),$("#unach").css("display","none")):a.getTargetGPA()>5?($("#graphKey>div:first-child").removeClass("s7"),$("#graphKey>div:first-child").addClass("s3"),$("#graphKey>div:first-child").css("padding","0 20px 0 0"),$("#conditional").css("display","block"),$("#unach").css("display","block"),$("#ap").css("display","none")):($("#graphKey>div:first-child").addClass("s7"),$("#graphKey>div:first-child").removeClass("s3"),$("#graphKey>div:first-child").css("padding","0"),$("#conditional").css("display","none"),$("#unach").css("display","none"),$("#ap").css("display","none")),graphModule.fill(a),$(".ct-chart").css("height","70vh"),$(".hide").removeClass("hide"),r("body>.row>div",t)}var l={};return l.passInput=function(s,r){var l=parseFloat(s[2].value),o=parseFloat(s[3].value),c=parseFloat(s[0].value),d=parseFloat(s[1].value);if(void 0!==s[4]&&"current_semester_checkbox"===s[4].name&&"on"===s[4].value){var u=[];u.push({units:c,grade:l,grade_points:c*l});for(var h=5;h<s.length;h+=2)if(null!==s[h].value||0!==parseFloat(s[h].value)){var p={units:parseFloat(s[h].value),grade:t(s[h+1].value),grade_points:parseFloat(s[h].value)*t(s[h+1].value)};u.push(p)}l=i(u),c=e(u)}var g=new a(l,o,c,d);n(g,r)},l}(),displayModule=void 0,graphModule=function(){function a(a,t){var e=[],s=t/2;return a.credits-s<0?e.push(0):e.push(a.credits-20),e.push(a.target_credits+20),e}function t(a){for(var t=[],e=a[0];e<=a[1];e+=l)t.push(e);return t}function e(a,t){for(var e=(t[1]-t[0])/l,s=(a.credits-t[0])/l,i=e+s,r=Array(i).fill(null),n=Array(i).fill(null),o=Array(i+5).fill(4),c=Array(i+5).fill(5),d=0,u=s;u<=s+(a.target_credits-a.credits)/l;u++){var h=(a.getTargetGPA()-a.currentGPA)/(a.target_credits-a.credits)*d+a.currentGPA;console.log(a.getTargetGPA()+" "+a.currentGPA+" "+d),d+=5,r[u]=h,s+(a.target_credits-a.credits)/l==u?n[u]=a.goalGPA:n[u]=null}return{data:r,average:n,ap:o,unachieveable:c}}function s(a,t){return a>t?[a,t]:[t,a]}function i(a){var t=s(a.currentGPA,a.getTargetGPA())[0],e=s(a.currentGPA,a.getTargetGPA())[1],i=.1,r=[];t-e!==0&&(i=(t-e)/8);for(var n=2*i,l=e-n;t+n>=l;l+=i)r.push(l.round(3));return{array:r,increment:i,buffer:n,largerGPA:t,smallerGPA:e}}function r(a){return{unachieveable:a.array[a.array.length-1]>5,ap:a.array[a.array.length-1]>4}}var n={},l=5,o=12;return n.fill=function(s){var n=a(s,5*o),l=(n[0],n[1],i(s)),c={labels:t(n),series:[{name:"unachieveableLine",data:e(s,n).unachieveable},{name:"apLine",data:e(s,n).ap},{name:"currentGPA",data:e(s,n).data},{name:"averageGPA",data:e(s,n).average}]},d=[["screen and (max-width: 768px)",{axisX:{labelInterpolationFnc:function(a,t){return t%3===0?a:null}}}]];new Chartist.Line(".ct-chart",c,{lineSmooth:!1,axisY:{type:Chartist.FixedScaleAxis,ticks:l.array,high:l.largerGPA+l.buffer,low:l.smallerGPA-l.buffer},axisX:{position:"start"},series:{apLine:{showArea:r(l).ap,areaBase:5,showLine:r(l).ap,showPoint:!1},unachieveableLine:{showArea:r(l).unachieveable,areaBase:l.array[l.array.length-1],showLine:r(l).unachieveable,showPoint:!1}}},d)},n}(),formModule=function(){function a(){var a=$("#class_card_template").html(),t=Mustache.to_html(a,{number:$("#classlist>li").length+1});$("#classlist").append(t),r&&($("#classlist li").removeClass("m6"),$(".card .input-field").removeClass("s6"),$(".card .input-field").addClass("s12"))}function t(){var a=1;$("#classlist > li").each(function(){$(".card-title",this).text("Class "+a);var t=1;$("input",this).each(function(){1==t?($(this).prop("id","class"+a+"_units"),$(this).prop("name","class"+a+"_units")):($(this).prop("id","class"+a+"_gpa"),$(this).prop("name","class"+a+"_gpa")),t++}),t=1,$("label",this).each(function(){1==t?$(this).prop("for","class"+a+"_units"):$(this).prop("for","class"+a+"_gpa"),t++}),a++})}function e(){return!(0!==$("form>div .input-field input.invalid").length||$("#current_semester_checkbox").is(":checked")&&0!==$("#classes input.invalid").length||void 0===$("form>div:first-of-type input").val()||void 0===$("form>div:nth-of-type(2) input").val()||void 0===$("form>div:nth-of-type(3) input").val()||""===$("form>div:first-of-type input").val()||""===$("form>div:nth-of-type(2) input").val()||""===$("form>div:nth-of-type(3) input").val())}function s(){$(document).on("click","a.add",function(){a(),$("#class"+$("#classlist>li").length+"_units").val($("#class"+$(this).closest("li").index()+"_units").val()),""!==$("#class"+$("#classlist>li").length+"_units").val()&&$("#class"+$("#classlist>li").length+"_units").next().addClass("active"),$("#class"+$("#classlist>li").length+"_gpa").val($("#class"+$(this).closest("li").index()+"_gpa").val()),""!==$("#class"+$("#classlist>li").length+"_gpa").val()&&$("#class"+$("#classlist>li").length+"_gpa").next().addClass("active"),$("#classlist li").last().velocity({translateX:"-100px"},{duration:0}),$("#classlist li").last().velocity({opacity:"1",translateX:"0"},{duration:800,delay:0,easing:[60,10]})}),$(document).on("propertychange change click keyup input paste focusout","input",function(){e()?$("button").removeClass("disabled"):$("button").addClass("disabled")}),$(document).on("click","a.remove",function(){$(this).closest("li").remove(),t(),Materialize.showStaggeredList("#classlist")}),$(document).on("click","form button",function(){r++,e()?mathModule.passInput($("form").serializeArray(),r):$("button").addClass("disabled")}),$("#current_semester_checkbox").change(function(){this.checked?($("#classes").removeClass("hidden"),0===$("#classlist>li").length&&addClass(),Materialize.showStaggeredList("#classlist")):$("#classes").addClass("hidden"),this.checked&&0!==$("#classes input.invalid").length?$("button").addClass("disabled"):$("button").removeClass("disabled")})}var i={},r=0;return i.init=function(){s()},i}();!function(){formModule.init()}();